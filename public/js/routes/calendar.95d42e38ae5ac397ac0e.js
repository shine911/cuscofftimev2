(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/qL9":function(e,t,n){"use strict";n.r(t);const i={HOUR_TOKENS:["HH","H","hh","h","kk","k"],MINUTE_TOKENS:["mm","m"],SECOND_TOKENS:["ss","s"],APM_TOKENS:["A","a"]};var s={name:"VueTimepicker",props:{value:{type:Object},hideClearButton:{type:Boolean},format:{type:String},minuteInterval:{type:Number},secondInterval:{type:Number},id:{type:String}},data:()=>({hours:[],minutes:[],seconds:[],apms:[],showDropdown:!1,muteWatch:!1,hourType:"HH",minuteType:"mm",secondType:"",apmType:"",hour:"",minute:"",second:"",apm:"",fullValues:void 0}),computed:{displayTime(){let e=String(this.format||"HH:mm");return this.hour&&(e=e.replace(new RegExp(this.hourType,"g"),this.hour)),this.minute&&(e=e.replace(new RegExp(this.minuteType,"g"),this.minute)),this.second&&this.secondType&&(e=e.replace(new RegExp(this.secondType,"g"),this.second)),this.apm&&this.apmType&&(e=e.replace(new RegExp(this.apmType,"g"),this.apm)),e},showClearBtn(){return!!(this.hour&&""!==this.hour||this.minute&&""!==this.minute)}},watch:{format:"renderFormat",minuteInterval(e){this.renderList("minute",e)},secondInterval(e){this.renderList("second",e)},value:"readValues",displayTime:"fillValues"},methods:{formatValue(e,t){switch(e){case"H":case"m":case"s":return String(t);case"HH":case"mm":case"ss":return t<10?`0${t}`:String(t);case"h":case"k":return String(t+1);case"hh":case"kk":return t+1<10?`0${t+1}`:String(t+1);default:return""}},checkAcceptingType(e,t,n){if(!e||!t||!t.length)return"";for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return e[n];return n||""},renderFormat(e){(e=e||this.format)&&e.length||(e="HH:mm"),this.hourType=this.checkAcceptingType(i.HOUR_TOKENS,e,"HH"),this.minuteType=this.checkAcceptingType(i.MINUTE_TOKENS,e,"mm"),this.secondType=this.checkAcceptingType(i.SECOND_TOKENS,e),this.apmType=this.checkAcceptingType(i.APM_TOKENS,e),this.renderHoursList(),this.renderList("minute"),this.secondType&&this.renderList("second"),this.apmType&&this.renderApmList();const t=this;this.$nextTick(()=>{t.readValues()})},renderHoursList(){const e="h"===this.hourType||"hh"===this.hourType?12:24;this.hours=[];for(let t=0;t<e;t++)this.hours.push(this.formatValue(this.hourType,t))},renderList(e,t){if("second"===e)t=t||this.secondInterval;else{if("minute"!==e)return;t=t||this.minuteInterval}0===t?t=60:t>60?(window.console.warn("`"+e+"-interval` should be less than 60. Current value is",t),t=1):t<1?(window.console.warn("`"+e+"-interval` should be NO less than 1. Current value is",t),t=1):t||(t=1),"minute"===e?this.minutes=[]:this.seconds=[];for(let n=0;n<60;n+=t)"minute"===e?this.minutes.push(this.formatValue(this.minuteType,n)):this.seconds.push(this.formatValue(this.secondType,n))},renderApmList(){this.apms=[],this.apmType&&(this.apms="A"===this.apmType?["AM","PM"]:["am","pm"])},readValues(){if(!this.value||this.muteWatch)return;const e=JSON.parse(JSON.stringify(this.value||{})),t=Object.keys(e);0!==t.length&&(t.indexOf(this.hourType)>-1&&(this.hour=e[this.hourType]),t.indexOf(this.minuteType)>-1&&(this.minute=e[this.minuteType]),t.indexOf(this.secondType)>-1?this.second=e[this.secondType]:this.second=0,t.indexOf(this.apmType)>-1&&(this.apm=e[this.apmType]),this.fillValues())},fillValues(){let e={};const t=this.hour,n=this.hourType,s=t||0===t?Number(t):"",o=this.isTwelveHours(n),r=!(!o||!this.apm)&&String(this.apm).toLowerCase();if(i.HOUR_TOKENS.forEach(i=>{if(i===n)return void(e[i]=t);let a,l;switch(i){case"H":case"HH":if(!String(s).length)return void(e[i]="");a=o?"pm"===r?s<12?s+12:s:s%12:s%24,e[i]="HH"===i&&a<10?`0${a}`:String(a);break;case"k":case"kk":if(!String(s).length)return void(e[i]="");a=o?"pm"===r?s<12?s+12:s:12===s?24:s:0===s?24:s,e[i]="kk"===i&&a<10?`0${a}`:String(a);break;case"h":case"hh":if(r)a=s,l=r||"am";else{if(!String(s).length)return e[i]="",e.a="",void(e.A="");s>11?(l="pm",a=12===s?12:s%12):(l=o?"":"am",a=s%12==0?12:s)}e[i]="hh"===i&&a<10?`0${a}`:String(a),e.a=l,e.A=l.toUpperCase()}}),this.minute||0===this.minute){const t=Number(this.minute);e.m=String(t),e.mm=t<10?`0${t}`:String(t)}else e.m="",e.mm="";if(this.second||0===this.second){const t=Number(this.second);e.s=String(t),e.ss=t<10?`0${t}`:String(t)}else e.s="",e.ss="";this.fullValues=e,this.updateTimeValue(e),this.$emit("change",{data:e})},updateTimeValue(e){this.muteWatch=!0;const t=this,n=JSON.parse(JSON.stringify(this.value||{}));let i={};Object.keys(n).forEach(t=>{i[t]=e[t]}),this.$emit("input",i),this.$nextTick(()=>{t.muteWatch=!1})},isTwelveHours:e=>"h"===e||"hh"===e,toggleDropdown(){this.showDropdown=!this.showDropdown},select(e,t){"hour"===e?this.hour=t:"minute"===e?this.minute=t:"second"===e?this.second=t:"apm"===e&&(this.apm=t)},clearTime(){this.hour="",this.minute="",this.second="",this.apm=""}},mounted(){this.renderFormat()}},o=(n("iJ+x"),n("KHd+")),r=Object(o.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"time-picker"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.displayTime,expression:"displayTime"}],staticClass:"display-time",attrs:{id:e.id,type:"text",readonly:""},domProps:{value:e.displayTime},on:{click:function(t){return t.stopPropagation(),e.toggleDropdown(t)},input:function(t){t.target.composing||(e.displayTime=t.target.value)}}}),e._v(" "),e.hideClearButton?e._e():n("span",{directives:[{name:"show",rawName:"v-show",value:!e.showDropdown&&e.showClearBtn,expression:"!showDropdown && showClearBtn"}],staticClass:"clear-btn",on:{click:function(t){return t.stopPropagation(),e.clearTime(t)}}},[e._v("×")]),e._v(" "),e.showDropdown?n("div",{staticClass:"time-picker-overlay",on:{click:function(t){return t.stopPropagation(),e.toggleDropdown(t)}}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showDropdown,expression:"showDropdown"}],staticClass:"dropdown"},[n("div",{staticClass:"select-list"},[n("ul",{staticClass:"hours"},[n("li",{staticClass:"hint",domProps:{textContent:e._s(e.hourType)}}),e._v(" "),e._l(e.hours,function(t){return n("li",{class:{active:e.hour===t},domProps:{textContent:e._s(t)},on:{click:function(n){return n.stopPropagation(),e.select("hour",t)}}})})],2),e._v(" "),n("ul",{staticClass:"minutes"},[n("li",{staticClass:"hint",domProps:{textContent:e._s(e.minuteType)}}),e._v(" "),e._l(e.minutes,function(t){return n("li",{class:{active:e.minute===t},domProps:{textContent:e._s(t)},on:{click:function(n){return n.stopPropagation(),e.select("minute",t)}}})})],2),e._v(" "),e.secondType?n("ul",{staticClass:"seconds"},[n("li",{staticClass:"hint",domProps:{textContent:e._s(e.secondType)}}),e._v(" "),e._l(e.seconds,function(t){return n("li",{class:{active:e.second===t},domProps:{textContent:e._s(t)},on:{click:function(n){return n.stopPropagation(),e.select("second",t)}}})})],2):e._e(),e._v(" "),e.apmType?n("ul",{staticClass:"apms"},[n("li",{staticClass:"hint",domProps:{textContent:e._s(e.apmType)}}),e._v(" "),e._l(e.apms,function(t){return n("li",{class:{active:e.apm===t},domProps:{textContent:e._s(t)},on:{click:function(n){return n.stopPropagation(),e.select("apm",t)}}})})],2):e._e()])])])},[],!1,null,null,null);t.default=r.exports},"62Uu":function(e,t,n){(t=e.exports=n("I1BE")(!1)).i(n("qg+X"),""),t.push([e.i,"\n",""])},BHuX:function(e,t,n){"use strict";n.r(t);var i=n("3Am6"),s=(n("f7zv"),n("PN1e")),o=n.n(s),r=n("PjKf"),a=n.n(r),l=n("5E5Q"),c=n.n(l),d=n("ogxq"),m=n.n(d),u=n("Lvc4"),h=n.n(u),p=n("UX8W"),v=n.n(p),f={components:{VueTimepicker:v.a},data:function(){return{event:{date:this.selected_date,class_id:null,time_start:{HH:"00",mm:"00"},time_end:{HH:"00",mm:"00"},reason:"",amount:0}}},methods:{changeEvent:function(){this.event.amount=this.event.time_end.HH-this.event.time_start.HH,this.event.amount<0&&this.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:"Giờ bắt đầu và kết thúc không hợp lệ",type:"error"})},showModal:function(){this.$refs["add-calendar"].show()},hideModal:function(){this.$refs["add-calendar"].hide()},handleOk:function(){var e=this,t=this;axios.post("/v1/calendar",{date:t.selected_date,class_id:t.event.class_id,time_start:t.event.time_start.HH+":"+t.event.time_start.mm,time_end:t.event.time_end.HH+":"+t.event.time_end.mm,reason:t.event.reason,amount:t.event.amount}).then(function(t){e.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:t.data.message,type:t.data.status})}).then(function(e){t.$store.dispatch("fetch_events")})}},computed:{selected_date:function(){return this.$store.getters.selected_date},my_assignments:function(){return this.$store.getters.my_assignments},my_class_options:function(){return this.$store.getters.my_class_options}}},g=n("KHd+"),_=Object(g.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"add-calendar",attrs:{size:"lg",id:"add-calendar",title:"Đăng ký lịch nghỉ","header-bg-variant":"primary","header-text-variant":"light","ok-title":"Lưu thông tin","ok-variant":"outline-primary","cancel-title":"Hủy","cancel-variant":"outline-secondary"},on:{ok:function(t){return e.handleOk()}}},[n("b-form-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Ngày đăng ký:","label-for":"date",description:"Ngày không thể thay đổi"}},[n("b-form-input",{attrs:{id:"date",type:"text",readonly:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-form-group",{attrs:{id:"input-group-2",label:"Từ","label-for":"time_start",description:"Chọn giờ bắt đầu"}},[n("vue-timepicker",{attrs:{format:"HH:mm"},on:{change:e.changeEvent},model:{value:e.event.time_start,callback:function(t){e.$set(e.event,"time_start",t)},expression:"event.time_start"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-form-group",{attrs:{id:"input-group-2",label:"Đến","label-for":"time_end",description:"Chọn giờ kết thúc"}},[n("vue-timepicker",{attrs:{format:"HH:mm"},on:{change:e.changeEvent},model:{value:e.event.time_end,callback:function(t){e.$set(e.event,"time_end",t)},expression:"event.time_end"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-4",label:"Số giờ","label-for":"amount",description:"Bắt buộc"}},[n("b-form-input",{model:{value:e.event.amount,callback:function(t){e.$set(e.event,"amount",t)},expression:"event.amount"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-3",label:"Lớp","label-for":"classroom",description:"Chọn lớp dạy"}},[n("b-form-select",{attrs:{options:e.my_class_options},model:{value:e.event.class_id,callback:function(t){e.$set(e.event,"class_id",t)},expression:"event.class_id"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-4",label:"Lý do","label-for":"reason",description:"Bắt buộc"}},[n("b-form-input",{model:{value:e.event.reason,callback:function(t){e.$set(e.event,"reason",t)},expression:"event.reason"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,b={components:{VueTimepicker:v.a},props:{event:{type:Object,default:function(){return{date:null,class_id:null,time_start:{HH:"00",mm:"00"},time_end:{HH:"00",mm:"00"},reason:"",amount:0}}}},methods:{changeEvent:function(){this.event.amount=this.event.time_end.HH-this.event.time_start.HH,this.event.amount<0&&this.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:"Giờ bắt đầu và kết thúc không hợp lệ",type:"error"})},handleOk:function(){var e=this,t=this;axios.put("/v1/calendar/"+t.event.id,{class_id:t.event.class_id,time_start:t.event.time_start.HH+":"+t.event.time_start.mm,time_end:t.event.time_end.HH+":"+t.event.time_end.mm,reason:t.event.reason,amount:t.event.amount,date:t.event.date}).then(function(t){e.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:t.data.message,type:t.data.status})}).then(function(e){t.$store.dispatch("fetch_events")})}},computed:{my_assignments:function(){return this.$store.getters.my_assignments},my_class_options:function(){return this.$store.getters.my_class_options}}},y=Object(g.a)(b,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"edit-calender",attrs:{id:"edit-calendar",size:"lg",title:"Thay đổi lịch nghỉ","header-bg-variant":"primary","header-text-variant":"light","ok-title":"Lưu thông tin","ok-variant":"outline-primary","cancel-title":"Hủy","cancel-variant":"outline-secondary"},on:{ok:function(t){return e.handleOk()}}},[n("b-form-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Ngày đăng ký:","label-for":"date",description:"Ngày không thể thay đổi"}},[n("b-form-input",{attrs:{id:"date",type:"text",readonly:""},model:{value:e.event.date,callback:function(t){e.$set(e.event,"date",t)},expression:"event.date"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-form-group",{attrs:{id:"input-group-2",label:"Từ","label-for":"time_start",description:"Chọn giờ bắt đầu"}},[n("vue-timepicker",{attrs:{format:"HH:mm"},on:{change:e.changeEvent},model:{value:e.event.time_start,callback:function(t){e.$set(e.event,"time_start",t)},expression:"event.time_start"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-form-group",{attrs:{id:"input-group-2",label:"Đến","label-for":"time_end",description:"Chọn giờ kết thúc"}},[n("vue-timepicker",{attrs:{format:"HH:mm"},on:{change:e.changeEvent},model:{value:e.event.time_end,callback:function(t){e.$set(e.event,"time_end",t)},expression:"event.time_end"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-4",label:"Số giờ","label-for":"amount",description:"Bắt buộc"}},[n("b-form-input",{model:{value:e.event.amount,callback:function(t){e.$set(e.event,"amount",t)},expression:"event.amount"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-3",label:"Lớp","label-for":"classroom",description:"Chọn lớp dạy"}},[n("b-form-select",{attrs:{options:e.my_class_options},model:{value:e.event.class_id,callback:function(t){e.$set(e.event,"class_id",t)},expression:"event.class_id"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"input-group-4",label:"Lý do","label-for":"reason",description:"Bắt buộc"}},[n("b-form-input",{model:{value:e.event.reason,callback:function(t){e.$set(e.event,"reason",t)},expression:"event.reason"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,k={components:{FullCalendar:i.a,AddModalComponent:_,EditModalComponent:y},data:function(){return{calendarPlugins:[o.a,a.a,c.a,m.a,h.a],calendarHeader:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},selected_event:{}}},methods:{eventClickHandle:function(e){var t=e.event,n=t.extendedProps.properties,i=new Date(t.start),s=new Date(t.end);i=i.toLocaleTimeString("en-GB").slice(0,5),s=s.toLocaleTimeString("en-GB").slice(0,5),this.$store.dispatch("fetchMyAssignments",t.start.toISOString().slice(0,7));var o={date:t.start.toISOString().slice(0,10),class_id:n.classroom.id,time_start:{HH:i.slice(0,2),mm:i.slice(3,5)},time_end:{HH:s.slice(0,2),mm:s.slice(3,5)},reason:n.reason,amount:n.amount,id:n.id};this.selected_event=o,this.$bvModal.show("edit-calendar")},dateClickHandle:function(e){this.$store.dispatch("set_selected_date",e.dateStr),this.$store.dispatch("fetchMyAssignments",e.dateStr.slice(0,7)),this.$bvModal.show("add-calendar")}},computed:{user:function(){return this.$store.getters.user},selected_date:function(){return this.$store.getters.selected_date},my_events:function(){return this.$store.getters.my_events}}},w=Object(g.a)(k,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("h1",{staticClass:"h3 mb-4 text-gray-800"},[e._v("Sắp xếp lịch nghỉ bù của "+e._s(e.user.name))]),e._v(" "),n("b-card",{attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[n("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[e._v("Lịch nghỉ bù")]),e._v(" "),n("FullCalendar",{attrs:{plugins:e.calendarPlugins,header:e.calendarHeader,events:e.my_events,navLink:!0,eventLimit:!0,locale:"vi",themeSystem:"bootstrap"},on:{eventClick:e.eventClickHandle,dateClick:e.dateClickHandle}})],1),e._v(" "),n("add-modal-component"),e._v(" "),n("edit-modal-component",{attrs:{event:e.selected_event}})],1)},[],!1,null,null,null);t.default=w.exports},DMoq:function(e,t,n){var i=n("62Uu");"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(e.exports=i.locals)},UX8W:function(e,t,n){e.exports=n("/qL9")},"iJ+x":function(e,t,n){"use strict";var i=n("DMoq");n.n(i).a},"qg+X":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".time-picker {\n  display: inline-block;\n  position: relative;\n  font-size: 1em;\n  width: 10em;\n  font-family: sans-serif;\n  vertical-align: middle;\n}\n.time-picker * {\n  box-sizing: border-box;\n}\n.time-picker input.display-time {\n  border: 1px solid #d2d2d2;\n  width: 10em;\n  height: 2.2em;\n  padding: 0.3em 0.5em;\n  font-size: 1em;\n}\n.time-picker .clear-btn {\n  position: absolute;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin-top: -0.15em;\n  z-index: 3;\n  font-size: 1.1em;\n  line-height: 1em;\n  vertical-align: middle;\n  width: 1.3em;\n  color: #d2d2d2;\n  background: rgba(255,255,255,0);\n  text-align: center;\n  font-style: normal;\n\n  -webkit-transition: color .2s;\n  transition: color .2s;\n}\n.time-picker .clear-btn:hover {\n  color: #797979;\n  cursor: pointer;\n}\n.time-picker .time-picker-overlay {\n  z-index: 2;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.time-picker .dropdown {\n  position: absolute;\n  z-index: 5;\n  top: calc(2.2em + 2px);\n  left: 0;\n  background: #fff;\n  box-shadow: 0 1px 6px rgba(0,0,0,0.15);\n  width: 10em;\n  height: 10em;\n  font-weight: normal;\n}\n.time-picker .dropdown .select-list {\n  width: 10em;\n  height: 10em;\n  overflow: hidden;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  justify-content: space-between;\n}\n.time-picker .dropdown ul {\n  padding: 0;\n  margin: 0;\n  list-style: none;\n\n  flex: 1;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.time-picker .dropdown ul.minutes,\n.time-picker .dropdown ul.seconds,\n.time-picker .dropdown ul.apms{\n  border-left: 1px solid #fff;\n}\n.time-picker .dropdown ul li {\n  text-align: center;\n  padding: 0.3em 0;\n  color: #161616;\n}\n.time-picker .dropdown ul li:not(.hint):hover {\n  background: rgba(0,0,0,.08);\n  color: #161616;\n  cursor: pointer;\n}\n.time-picker .dropdown ul li.active,\n.time-picker .dropdown ul li.active:hover {\n  background: #41B883;\n  color: #fff;\n}\n.time-picker .dropdown .hint {\n  color: #a5a5a5;\n  cursor: default;\n  font-size: 0.8em;\n}\n",""])}}]);