(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{UfsI:function(t,e,a){"use strict";var n={props:{dataSource:{type:Array,default:function(){return[]}},columnDef:{type:Array,default:function(){return[]}}},data:function(){return{currentPage:1,perPage:5}},methods:{editClick:function(t){this.$emit("editClick",t)},removeClick:function(t){this.$emit("removeClick",t)}}},s=a("KHd+"),r=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-table",{attrs:{striped:"",bordered:"",outlined:"",hover:"","current-page":t.currentPage,"per-page":t.perPage,items:t.dataSource,fields:t.columnDef},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(a){return t.editClick(e.item)}}},[a("i",{staticClass:"fas fa-edit"})]),t._v(" "),a("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(a){return t.removeClick(e.item)}}},[a("i",{staticClass:"fas fa-trash"})])]}},{key:"is_overtime",fn:function(e){return[e.value?a("i",{staticClass:"text-primary fas fa-check"}):t._e()]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.dataSource.length,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},[],!1,null,null,null);e.a=r.exports},XTFd:function(t,e,a){"use strict";a.r(e);var n=a("1F/t"),s={components:{VueBootstrapTypeahead:n.a},computed:{user:function(){return this.$store.getters.user}},data:function(){return{subject:{name:null,amount:null,semester:null,course_id:null},courses_query:"",courses:[],options_semester:[{value:null,text:"Chọn học kì"},{value:1,text:"Học kì I"},{value:2,text:"Học kì II"},{value:3,text:"Học kì III"},{value:4,text:"Học kì IV"}]}},methods:{handleOk:function(){var t=this;axios.post("/v1/admin/subjects",{subject:t.subject}).then(function(e){t.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:e.data.message,type:e.data.status})}).then(function(e){t.$store.dispatch("fetch_subjects")})}},watch:{courses_query:function(t){var e=this;axios.get("/v1/admin/courses?q=".concat(t)).then(function(t){e.courses=t.data})}}},r=a("KHd+"),o=Object(r.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"add-subject",attrs:{size:"lg",id:"add-subject",title:"Thêm môn học mới","header-bg-variant":"primary","header-text-variant":"light","ok-title":"Lưu thông tin","ok-variant":"outline-primary","cancel-title":"Hủy","cancel-variant":"outline-secondary"},on:{ok:function(e){return t.handleOk()}}},[a("b-form-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên môn học:","label-for":"",description:"Tên môn học mới"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.subject.name,callback:function(e){t.$set(t.subject,"name",e)},expression:"subject.name"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{id:"input-group-2",label:"Chương trình:","label-for":"date",description:"Chọn chương trình học"}},[a("vue-bootstrap-typeahead",{attrs:{serializer:function(t){return t.name},data:t.courses},on:{hit:function(e){t.subject.course_id=e.id}},model:{value:t.courses_query,callback:function(e){t.courses_query=e},expression:"courses_query"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Học kì",description:"Chọn một học kì"}},[a("b-form-select",{attrs:{options:t.options_semester},model:{value:t.subject.semester,callback:function(e){t.$set(t.subject,"semester",e)},expression:"subject.semester"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Số tiết:",description:"Nhập số tiết học"}},[a("b-form-input",{attrs:{id:"amount",type:"text"},model:{value:t.subject.amount,callback:function(e){t.$set(t.subject,"amount",e)},expression:"subject.amount"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,c={components:{VueBootstrapTypeahead:n.a},props:{data:{type:Object,default:function(){return{id:null,name:"",amount:null,semester:null,course_id:null,course:{id:null,name:"",type_id:null,course_type:{id:null,name:""}}}}}},data:function(){return{courses_query:"",courses:[],options_semester:[{value:null,text:"Chọn học kì"},{value:1,text:"Học kì I"},{value:2,text:"Học kì II"},{value:3,text:"Học kì III"},{value:4,text:"Học kì IV"}]}},methods:{handleOk:function(){var t=this;axios.put("/v1/admin/subjects/"+this.data.id,{name:t.data.name,amount:t.data.amount,semester:t.data.semester,course_id:t.data.course_id}).then(function(e){t.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:e.data.message,type:e.data.status})}).then(function(e){t.$store.dispatch("fetch_subjects")})}},watch:{courses_query:function(t){var e=this;axios.get("/v1/admin/courses?q=".concat(t)).then(function(t){e.courses=t.data})}}},i={beforeCreate:function(){this.$store.getters.user.roles||(alert("You dont have permision"),this.$router.go(-1))},components:{AddComponent:o,EditComponent:Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"edit-subject",attrs:{size:"lg",id:"edit-subject",title:"Sửa môn học","header-bg-variant":"primary","header-text-variant":"light","ok-title":"Lưu thông tin","ok-variant":"outline-primary","cancel-title":"Hủy","cancel-variant":"outline-secondary"},on:{ok:function(e){return t.handleOk()}}},[a("b-form-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên môn học:","label-for":"",description:"Tên môn học mới"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{id:"input-group-2",label:"Chương trình:","label-for":"date",description:"Không thay đổi để trống"}},[a("vue-bootstrap-typeahead",{attrs:{placeholder:"(Không thay đổi)",serializer:function(t){return t.name},data:t.courses},on:{hit:function(e){t.data.course_id=e.id}},model:{value:t.courses_query,callback:function(e){t.courses_query=e},expression:"courses_query"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Học kì",description:"Chọn một học kì"}},[a("b-form-select",{attrs:{options:t.options_semester},model:{value:t.data.semester,callback:function(e){t.$set(t.data,"semester",e)},expression:"data.semester"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Số tiết:",description:"Nhập số tiết học"}},[a("b-form-input",{attrs:{id:"amount",type:"text"},model:{value:t.data.amount,callback:function(e){t.$set(t.data,"amount",e)},expression:"data.amount"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,TableComponent:a("UfsI").a},data:function(){return{fields:[{key:"name",label:"Tên",sortable:!0},{key:"amount",label:"Số tiết",sortable:!0},{key:"semester",label:"Học kì",sortable:!0},{key:"course.name",label:"Tên khóa học",sortable:!0},{key:"course.course_type.name",label:"Tên loại hình",sortable:!0},{key:"actions",label:"Hành động"}],currentPage:1,perPage:5,selected_subject:{}}},created:function(){this.$store.dispatch("fetch_subjects")},computed:{user:function(){return this.$store.getters.user},subjects_table:function(){return this.$store.getters.subjects_table},subjects:function(){return this.$store.getters.subjects}},methods:{addClick:function(){this.$bvModal.show("add-subject")},editClick:function(t){this.selected_subject=t,this.$bvModal.show("edit-subject")},removeClick:function(t){if(confirm("Bạn có chắc chắn xóa ?")){var e=this;axios.delete("/v1/admin/subjects/"+t.id).then(function(t){e.$notify({group:"notify",title:"<h6>Thông báo</h6>",text:t.data.message,type:t.data.status})}).then(function(t){e.$store.dispatch("fetch_subjects")})}}}},u=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("h1",{staticClass:"h3 mb-4 text-gray-800"},[t._v("Trình quản lí môn học")]),t._v(" "),a("b-card",{attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[a("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Bảng môn học")]),t._v(" "),a("b-button",{staticClass:"mb-3",attrs:{variant:"primary"},on:{click:t.addClick}},[t._v("Thêm môn")]),t._v(" "),a("table-component",{attrs:{dataSource:t.subjects,columnDef:t.fields},on:{editClick:t.editClick,removeClick:t.removeClick}})],1),t._v(" "),a("add-component"),t._v(" "),a("edit-component",{attrs:{data:t.selected_subject}})],1)},[],!1,null,null,null);e.default=u.exports}}]);