(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{G6I7:function(t,a,e){(a=t.exports=e("I1BE")(!1)).i(e("DQ5Z"),""),a.i(e("BetG"),""),a.i(e("cqcM"),""),a.i(e("Jy1V"),""),a.i(e("yZtI"),""),a.push([t.i,"\n",""])},OyEX:function(t,a,e){"use strict";var r=e("WqJI");e.n(r).a},WqJI:function(t,a,e){var r=e("G6I7");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(r,s);r.locals&&(t.exports=r.locals)},wInV:function(t,a,e){"use strict";e.r(a);var r=e("3Am6"),s=(e("f7zv"),e("PN1e")),n=e.n(s),i=e("PjKf"),o=e.n(i),l=e("5E5Q"),d=e.n(l),c=e("ogxq"),h=e.n(c),u=e("Lvc4"),m=e.n(u),b=e("MO+k"),p=e.n(b);function g(t,a){return{render:function(t){return t("div",{style:this.styles,class:this.cssClasses},[t("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:t,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(t){this.$data._plugins.push(t)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(t,e){this.$data._chart&&this.$data._chart.destroy(),this.$data._chart=new p.a(this.$refs.canvas.getContext("2d"),{type:a,data:t,options:e,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var f=g("bar-chart","bar");g("horizontalbar-chart","horizontalBar"),g("doughnut-chart","doughnut"),g("line-chart","line"),g("pie-chart","pie"),g("polar-chart","polarArea"),g("radar-chart","radar"),g("bubble-chart","bubble"),g("scatter-chart","scatter");function v(t,a){if(a){var e=this.$data._chart,r=t.datasets.map(function(t){return t.label}),s=a.datasets.map(function(t){return t.label}),n=JSON.stringify(s);JSON.stringify(r)===n&&a.datasets.length===t.datasets.length?(t.datasets.forEach(function(t,r){var s=Object.keys(a.datasets[r]),n=Object.keys(t),i=s.filter(function(t){return"_meta"!==t&&-1===n.indexOf(t)});for(var o in i.forEach(function(t){delete e.data.datasets[r][t]}),t)t.hasOwnProperty(o)&&(e.data.datasets[r][o]=t[o])}),t.hasOwnProperty("labels")&&(e.data.labels=t.labels,this.$emit("labels:update")),t.hasOwnProperty("xLabels")&&(e.data.xLabels=t.xLabels,this.$emit("xlabels:update")),t.hasOwnProperty("yLabels")&&(e.data.yLabels=t.yLabels,this.$emit("ylabels:update")),e.update(),this.$emit("chart:update")):(e&&(e.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}var y={props:{chartData:{type:Object,required:!0,default:function(){}},options:{type:Object,default:null}},watch:{chartData:v}},_={extends:f,mixins:[y],mounted:function(){this.renderChart(this.chartData,this.options)}},C={components:{BarChart:_},created:function(){var t=this;axios.get("/v1/dashboard/chart").then(function(a){t.datachart=a.data,t.fillData()})},data:function(){return{datacollection:{},options:{maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},scales:{xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:6},maxBarThickness:25}],yAxes:[{ticks:{min:0,maxTicksLimit:5,padding:10},gridLines:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]}}]},legend:{display:!1},tooltips:{titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,caretPadding:10},responsive:!0},datachart:null}},mounted:function(){},methods:{fillData:function(){this.datacollection={labels:["Trong Giờ","Ngoài Giờ"],datasets:[{label:"Tổng số giờ",backgroundColor:"#4e73df",hoverBackgroundColor:"#2e59d9",borderColor:"#4e73df",data:this.datachart}]}}}},w=e("KHd+"),x=Object(w.a)(C,function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("bar-chart",{attrs:{"chart-data":this.datacollection,options:this.options}}),this._v(" "),a("hr"),this._v(" "),a("p",[this._v(" Dữ liệu được cập nhật mỗi 5 giây ")])],1)},[],!1,null,null,null).exports,k={components:{BarChart:_},created:function(){var t=this;axios.get("/v1/dashboard/singlechart").then(function(a){a.data.forEach(function(a){t.datalabel.push(a.name);var e=0,r=0;a.assignments.forEach(function(t){t.class.is_overtime?r+=t.subject.amount:e+=t.subject.amount}),t.datachart.intime.push(e),t.datachart.overtime.push(r)}),t.fillData()})},data:function(){return{datacollection:{},options:{maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},scales:{xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:6},maxBarThickness:25}],yAxes:[{ticks:{min:0,maxTicksLimit:5,padding:10},gridLines:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]}}]},legend:{display:!1},tooltips:{titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,caretPadding:10},responsive:!0},datachart:{intime:[],overtime:[]},datalabel:[]}},mounted:function(){},methods:{fillData:function(){this.datacollection={labels:this.datalabel,datasets:[{label:"Trong giờ",backgroundColor:"#4e73df",hoverBackgroundColor:"#2e59d9",borderColor:"#4e73df",data:this.datachart.intime},{label:"Ngoài giờ",backgroundColor:"#4e73df",hoverBackgroundColor:"#2e59d9",borderColor:"#4e73df",data:this.datachart.overtime}]}}}},L=Object(w.a)(k,function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("bar-chart",{attrs:{"chart-data":this.datacollection,options:this.options}}),this._v(" "),a("hr"),this._v(" "),a("p",[this._v(" Dữ liệu được cập nhật mỗi 5 giây ")])],1)},[],!1,null,null,null).exports,$={props:{data:{type:Object,default:function(){return{}}}},methods:{showModal:function(){this.$refs["popup-calendar"].show()},hideModal:function(){this.$refs["popup-calendar"].hide()}}},B=Object(w.a)($,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"popup-calendar",attrs:{size:"lg",id:"popup-calendar",title:"Thông tin","header-bg-variant":"primary","header-text-variant":"light","hide-footer":""}},[e("b-row",[e("b-col",{attrs:{col:"",sm:"4"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Tên cán bộ")])]),t._v(" "),e("b-col",{attrs:{col:"",sm:"8"}},[e("label",{attrs:{id:"tenCB"}},[t._v(t._s(t.data.name))])])],1),t._v(" "),e("b-row",[e("b-col",{attrs:{col:"",sm:"4"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Lớp:")])]),t._v(" "),e("b-col",{attrs:{col:"",sm:"8"}},[e("label",{attrs:{id:"lop"}},[t._v(t._s(t.data.classroom))])])],1),t._v(" "),e("b-row",[e("b-col",{attrs:{col:"",sm:"4"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Thời gian nghỉ:")])]),t._v(" "),e("b-col",{attrs:{col:"",sm:"8"}},[e("label",{attrs:{id:"thoigian"}},[t._v(t._s(t.data.amount))])])],1),t._v(" "),e("b-row",[e("b-col",{attrs:{col:"",sm:"4"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Ngày nghỉ:")])]),t._v(" "),e("b-col",{attrs:{col:"",sm:"8"}},[e("label",{attrs:{id:"ngay"}},[t._v(t._s(t.data.date))])])],1),t._v(" "),e("b-row",[e("b-col",{attrs:{col:"",sm:"4"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Lý do:")])]),t._v(" "),e("b-col",{attrs:{col:"",sm:"8"}},[e("label",{attrs:{id:"lido"}},[t._v(t._s(t.data.reason))])])],1),t._v(" "),e("b-button",{staticClass:"mt-3",attrs:{variant:"outline-primary",block:""},on:{click:function(a){return t.$bvModal.hide("popup-calendar")}}},[t._v("Đóng")])],1)},[],!1,null,null,null).exports,S={created:function(){this.getSummaryInfo()},components:{FullCalendar:r.a,BarChartComponent:x,SingleChartComponent:L,DateviewComponent:B},data:function(){return{calendarPlugins:[n.a,o.a,d.a,h.a,m.a],calendarHeader:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},calendarEvent:[],summary:{user:0,assignments:0,offdays:0,course_type:0,courses:0,subjects:0,classroom:0},eventSeleted:{name:"Lorem isum",classroom:"Lorem isum",amount:"Lorem isum",date:"Lorem isum"},inputMonth:(new Date).toISOString().slice(0,7)}},methods:{getSummaryInfo:function(){var t=this;axios.get("/v1/dashboard/summary").then(function(a){t.summary=a.data})},eventClickHandle:function(t){var a=t.event,e=a.extendedProps.properties,r=new Date(a.start),s=new Date(a.end),n=r.toLocaleTimeString("en-GB").slice(0,5)+"-"+s.toLocaleTimeString("en-GB").slice(0,5);this.eventSeleted.name=a.title,this.eventSeleted.classroom=e.classroom.name,this.eventSeleted.reason=e.reason,this.eventSeleted.amount=n,this.eventSeleted.date=r.toLocaleDateString("vi-VN"),this.$bvModal.show("popup-calendar")},exportCalendar:function(){axios.get("/v1/calendar/export",{params:{month:this.inputMonth}}).then(function(t){document.location.href=t.data.file})}},computed:{events:function(){return this.$store.getters.events},user:function(){return this.$store.getters.user}}},D=(e("OyEX"),Object(w.a)(S,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{staticClass:"d-none d-md-block",attrs:{xd:"12"}},[e("b-card",{staticClass:"shadow mb-4",attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[e("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Lịch Nghỉ Bù")]),t._v(" "),t.user.roles?e("b-form",{staticClass:"m-3",attrs:{inline:""},on:{submit:t.exportCalendar}},[e("b-form-input",{staticClass:"mr-2",attrs:{id:"amount",type:"month"},model:{value:t.inputMonth,callback:function(a){t.inputMonth=a},expression:"inputMonth"}}),t._v(" "),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{type:"submit",variant:"primary",title:"Xuất thống kê"}},[e("i",{staticClass:"fas fa-file-excel"})])],1):t._e(),t._v(" "),e("FullCalendar",{attrs:{plugins:t.calendarPlugins,header:t.calendarHeader,events:t.events,navLinks:!0,eventLimit:!0,locale:"vi",themeSystem:"bootstrap"},on:{eventClick:t.eventClickHandle}})],1)],1),t._v(" "),e("b-col",{staticClass:"d-none d-sm-block d-md-none",attrs:{cols:"12"}},[e("b-card",{staticClass:"shadow mb-4",attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[e("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Lịch Nghỉ Bù")]),t._v(" "),e("span",[t._v("Full Calendar not support mobile view")])])],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-card",{staticClass:"shadow mb-4",attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[e("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Số giờ học từng người trong tháng")]),t._v(" "),e("single-chart-component")],1)],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"12",sm:"6"}},[e("b-card",{staticClass:"shadow mb-4",attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[e("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Số giờ học mọi người trong tháng")]),t._v(" "),e("bar-chart-component")],1)],1),t._v(" "),e("b-col",{attrs:{cols:"12",sm:"6"}},[e("b-card",{staticClass:"shadow mb-4",attrs:{"header-bg-variant":"primary","header-tag":"header","header-class":"py-3 d-flex flex-row align-items-center justify-content-between"}},[e("h6",{staticClass:"m0 font-weight-bold text-light",attrs:{slot:"header"},slot:"header"},[t._v("Thống kê")]),t._v(" "),e("b-list-group",[e("b-list-group-item",[t._v("Tổng cán bộ: "+t._s(t.summary.user))]),t._v(" "),e("b-list-group-item",[t._v("Tổng phân công: "+t._s(t.summary.assignments))]),t._v(" "),e("b-list-group-item",[t._v("Tổng ngày nghỉ: "+t._s(t.summary.offdays))]),t._v(" "),e("b-list-group-item",[t._v("Tổng loại hình: "+t._s(t.summary.course_type))]),t._v(" "),e("b-list-group-item",[t._v("Tổng chương trình: "+t._s(t.summary.courses))]),t._v(" "),e("b-list-group-item",[t._v("Tổng môn học: "+t._s(t.summary.subjects))]),t._v(" "),e("b-list-group-item",[t._v("Tổng lớp học: "+t._s(t.summary.classroom))])],1)],1)],1)],1),t._v(" "),e("dateview-component",{attrs:{data:t.eventSeleted}})],1)},[],!1,null,null,null));a.default=D.exports}}]);